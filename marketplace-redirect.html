<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ç–∫—Ä—ã—Ç—å ADK App</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display:flex; justify-content:center; align-items:center; min-height:100vh; padding:20px;
        }
        .container {
            background:white; border-radius:20px; padding:40px;
            max-width:400px; width:100%; text-align:center; box-shadow:0 20px 60px rgba(0,0,0,0.3);
        }
        .logo { width:80px; height:80px; margin:0 auto 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius:20px; display:flex; align-items:center; justify-content:center;
            font-size:40px; color:white;
        }
        h1 { font-size:24px; margin-bottom:10px; color:#333; }
        p { color:#666; margin-bottom:30px; line-height:1.6; }
        .btn {
            display:inline-block; padding:15px 30px; background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            color:white; text-decoration:none; border-radius:10px; font-weight:600;
            transition: transform 0.2s, box-shadow 0.2s; margin:5px; border:none; cursor:pointer;
            font-size:16px; width:100%;
        }
        .btn:hover { transform:translateY(-2px); box-shadow:0 10px 20px rgba(102,126,234,0.4); }
        .stores { margin-top:30px; padding-top:30px; border-top:1px solid #eee; }
        .stores h3 { font-size:14px; color:#999; margin-bottom:15px; text-transform:uppercase; letter-spacing:1px; }
        .store-buttons { display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
        .store-btn { flex:1; min-width:140px; }
    </style>
</head>
<body>
<div class="container">
    <div class="logo">üõçÔ∏è</div>
    <h1>ADK Marketplace</h1>
    <p>–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—ã—Ç–∞ –ø–æ–∫—É–ø–æ–∫</p>

    <button class="btn" id="openAppBtn">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>

    <div class="stores">
        <h3>–ù–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?</h3>
        <div class="store-buttons">
            <a href="https://play.google.com/store/apps/details?id=kz.trk.adk" class="btn store-btn" target="_blank">
                üì≤ Google Play
            </a>
            <a href="https://apps.apple.com/app/id6738287326" class="btn store-btn" target="_blank">
                üçé App Store
            </a>
        </div>
    </div>
</div>

<script>
    const path = window.location.pathname;
    const isAndroid = /android/i.test(navigator.userAgent);
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—É—Ç—å deep link
    let deepLinkPath = '';
    if (path.includes('/marketplace-product/')) {
        const productId = path.split('/marketplace-product/')[1].split('/')[0].split('?')[0];
        deepLinkPath = `marketplace-product/${productId}`;
    } else if (path.includes('/marketplace-epay-processing/')) {
        const paymentId = path.split('/marketplace-epay-processing/')[1].split('/')[0].split('?')[0];
        deepLinkPath = `marketplace-epay-processing/${paymentId}`;
    }

    // –µ—Å–ª–∏ –ø—É—Ç—å –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª–∏ ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    const customSchemeLink = deepLinkPath
        ? `adkapp://${deepLinkPath}`
        : `adkapp://`;

    const intentUrl = deepLinkPath
        ? `intent://${deepLinkPath}#Intent;scheme=https;package=kz.trk.adk;end`
        : `intent://#Intent;scheme=https;package=kz.trk.adk;end`;

    function openApp() {
        if (isAndroid) {
            // Android ‚Äî —Å—Ä–∞–∑—É Intent
            window.location.href = intentUrl;
        } else if (isIOS) {
            // iOS ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ –∫–ª–∏–∫—É, —á—Ç–æ–±—ã –Ω–µ –ª–æ–≤–∏—Ç—å –ª–∏—à–Ω—é—é –æ—à–∏–±–∫—É –≤ Safari.
            // –ó–¥–µ—Å—å –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –≤ Info.plist –±—ã–ª–∞ —Å—Ö–µ–º–∞ adkapp.
            window.location.href = customSchemeLink;
        }
    }

    document.getElementById('openAppBtn').addEventListener('click', openApp);

    // –ê–≤—Ç–æ-–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –¥–ª—è Android
    window.onload = function () {
        if (isAndroid) {
            openApp();
        }
        // –¥–ª—è iOS –ø–æ–ª–∞–≥–∞–µ–º—Å—è –Ω–∞:
        // 1) –≤–µ—Ä—Ö–Ω–∏–π –±–∞–Ω–Ω–µ—Ä "–û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ADK" (universal link)
        // 2) –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
    };
</script>
</body>
</html>
