<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ç–∫—Ä—ã—Ç—å ADK App</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display:flex; justify-content:center; align-items:center; min-height:100vh; padding:20px;
        }
        .container {
            background:white; border-radius:20px; padding:40px;
            max-width:400px; width:100%; text-align:center; box-shadow:0 20px 60px rgba(0,0,0,0.3);
        }

        /* –õ–û–ì–û */
        .logo {
            width:100px;
            height:100px;
            margin:0 auto 20px;
            border-radius:20px;
            overflow:hidden;
            display:flex;
            align-items:center;
            justify-content:center;
            background:white;
        }

        .logo img {
            width:100%;
            height:100%;
            object-fit:contain;
        }

        h1 { font-size:24px; margin-bottom:10px; color:#333; }
        p { color:#666; margin-bottom:30px; line-height:1.6; }

        .btn {
            display:inline-block; padding:15px 30px; background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            color:white; text-decoration:none; border-radius:10px; font-weight:600;
            transition: transform 0.2s, box-shadow 0.2s; margin:5px; border:none; cursor:pointer;
            font-size:16px; width:100%;
        }
        .btn:hover { transform:translateY(-2px); box-shadow:0 10px 20px rgba(102,126,234,0.4); }

        .stores { margin-top:30px; padding-top:30px; border-top:1px solid #eee; }
        .stores h3 { font-size:14px; color:#999; margin-bottom:15px; text-transform:uppercase; letter-spacing:1px; }
        .store-buttons { display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
        .store-btn { flex:1; min-width:140px; }
    </style>
</head>
<body>
<div class="container">

    <!-- –õ–û–ì–û -->
    <div class="logo">
        <img src="adk.png" alt="ADK Logo">
        <!-- –ó–ê–ú–ï–ù–ò –ø—É—Ç—å src –Ω–∞ –ø—É—Ç—å —Ç–≤–æ–µ–π –∏–∫–æ–Ω–∫–∏ -->
    </div>

    <h1>ADK Marketplace</h1>
    <p>–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—ã—Ç–∞ –ø–æ–∫—É–ø–æ–∫</p>

    <button class="btn" id="openAppBtn">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>

    <div class="stores">
        <h3>–ù–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?</h3>
        <div class="store-buttons">
            <a href="https://play.google.com/store/apps/details?id=kz.trk.adk" class="btn store-btn" target="_blank">
                üì≤ Google Play
            </a>
            <a href="itms-apps://apps.apple.com/kz/app/id1614398205"
               class="btn store-btn"
               target="_blank">
                üçé App Store
            </a>
        </div>
    </div>
</div>

<script>
    const path = window.location.pathname;
    const isAndroid = /android/i.test(navigator.userAgent);
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

    let deepLinkPath = '';
    let host = 'adk-app.netlify.app'; // –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ö–æ—Å—Ç

    if (path.includes('/marketplace-product/')) {
        const productId = path.split('/marketplace-product/')[1].split('/')[0].split('?')[0];
        deepLinkPath = `marketplace-product/${productId}`;
        host = 'adk-app.netlify.app';
    } else if (path.includes('/marketplace-epay-processing/')) {
        const paymentId = path.split('/marketplace-epay-processing/')[1].split('/')[0].split('?')[0];
        deepLinkPath = `marketplace-epay-processing/${paymentId}`;
        host = 'adk.app'; // —Å–º. –≤—Ç–æ—Ä–æ–π intent-filter –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ
    }

    // iOS custom-scheme
    const customSchemeLink = deepLinkPath
        ? `adk:/${deepLinkPath}`
        : `adk:/`;

    // ANDROID: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π intent —Å —Ö–æ—Å—Ç–æ–º
    const intentUrl = deepLinkPath
        ? `intent://${host}/${deepLinkPath}#Intent;scheme=https;package=kz.trk.adk;end`
        : `intent://${host}#Intent;scheme=https;package=kz.trk.adk;end`;

    function openApp() {
        if (isAndroid) {
            window.location.href = intentUrl;
        } else if (isIOS) {
            window.location.href = customSchemeLink;
        }
    }

    document.getElementById('openAppBtn').addEventListener('click', openApp);

    // Android ‚Äî –∞–≤—Ç–æ–æ—Ç–∫—Ä—ã—Ç–∏–µ
    window.onload = () => {
        if (isAndroid) openApp();
    };
</script>

</body>
</html>
